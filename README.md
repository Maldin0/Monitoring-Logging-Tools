# Monitoring-Logging-Tools

some Description here

## Topic
- Log Reader/Analysis
    - [ไปที่ Log Reader/Analysis](#log-readeranalysis)
- Log Collection/Server
    - [ไปที่ Log Collection/Server](#log-collectionserver)
- Log Files
    - [ไปที่ Log Files](#log-files)
- Working with Texts
    - [ไปที่ Working with Texts](#working-with-texts)

---

- [ ] daad
- [x] dad

[^1]: This is the footnote.

> :warning: **Warning**

**bold**
*italic*
***bold italic***


~~kill yourself~~

```bash
rm -rf /
```

d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d
d

d

## Log Reader/Analysis
### Journalctl
**Journald** เป็น **daemon** ที่รวบรวมและเก็บบันทึกจากทั้งระบบ โดยข้อความเหล่านั้นเป็นข้อความบูต ข้อความเคอร์เนลและจาก **syslog** หรือ app ต่าง ๆ และเก็บข้อความเหล่านั้นไว้ในตำแหน่งศูนย์กลาง **file journald**

ด้านล่างนี้คือตัวอย่างลักษณะของไฟล์ ดูโดยใช้คำสั่ง cat

```bash
$ cat /etc/systemd/journald.conf

# See journald.conf(5) for details.
```

ผลลัพท์ที่ได้

```
[Journal]
#Storage=auto
#Compress=yes
#Seal=yes
#SplitMode=uid
#SyncIntervalSec=5m
#RateLimitInterval=30s
#RateLimitBurst=1000
#SystemMaxUse=
#SystemKeepFree=
#SystemMaxFileSize=
#SystemMaxFiles=100
#RuntimeMaxUse=
#RuntimKeepFree=
#RuntimeMaxFiles=100
#MaxRetentionSec=
#MaxFileSec=1month
#ForwardToSyslog=yes
#ForwardToKMsg=no
#ForwardToConsole=no
#ForwardToWall=yes
#TTYPath=/dev/console
#MaxLevelStore=debug
#MaxLevelSyslog=debug
#MaxLevelKMsg=notice
#MaxLevelConsole=info
#MaxLevelWall=emerg
```
## Log Collection/Server
some description here

## Log Files
some description here

## Working with Texts
ไฟล์ส่วนใหญ่ในระบบมักจะถูกเก็บในรูปแบบของข้อความ ซึ่งในไฟล์ก็จะประกอบไปด้วยข้อความจำนวนมาก การจะดึงเอาข้อมูลที่ต้องการออกมาจึงต้องมีการใช้คำสั่งเพื่อให้ผู้ใช้งานจัดการกับข้อความได้เพื่อเพิ่มประสิทธิภาพในการแสดงออกของข้อมูล

### `cat`
เป็นคำสั่งที่ใช้ในการแสดงข้อมูลในไฟล์นั้น ๆ โดยใช้คำสั่ง `cat` ตามด้วยชื่อไฟล์ที่ต้องการแสดง

```bash
$ cat food.txt
```

นอกจากนั้น `cat` ยังใช้สร้างไฟล์ใหม่ได้ด้วย โดยใช้คำสั่ง `cat` ตามด้วยชื่อไฟล์ที่ต้องการสร้าง และใช้ `>` ตามด้วยชื่อไฟล์ที่ต้องการสร้าง

```bash
$ cat > food.txt
```

จากนั้นให้พิมพ์ข้อความที่ต้องการเพิ่มลงไปในไฟล์ และกด `Ctrl + C` เพื่อบันทึกไฟล์

ในกรณีที่ใช้ `>` แล้วมีไฟล์ที่มีข้อมูลอยู่แล้ว การใช้คำสั่ง `cat` จะทำให้ข้อมูลในไฟล์เดิมถูกเขียนทับด้วยข้อมูลใหม่

แต่หากต้องการจะเพิ่มข้อมูลเข้าไปในไฟล์ที่มีข้อมูลอยู่แล้ว ให้ใช้คำสั่ง `cat` ตามด้วยชื่อไฟล์ที่ต้องการเพิ่มข้อมูล และใช้ `>>` ตามด้วยชื่อไฟล์ที่ต้องการเพิ่มข้อมูล

```bash
$ cat >> food.txt
```

### `echo`/`printf`
2 คำสั่งนี้ทำหน้าที่คล้ายกับ `cat` แต่มีความหลากหลายในการใช้งานมากกว่า

`echo` สร้างพร้อมเพิ่มข้อความพร้อมกันได้โดยพิมพ์
    
```bash
$ echo "Hello" > greet.txt
```

หรือสามารถสร้างหลาย ๆ ไฟล์พร้อมกันได้โดยพิมพ์

```bash
$ echo >> file1.txt >> file2.txt
```

`printf` สามารถใช้สร้างข้อความที่มีรูปแบบได้แบบภาษา C อย่างเช่น `%s` `%d` และอื่น ๆ
```bash
$ printf "Hello\n" > greet.txt
```

### Vi / Vim Editor
`vi` และ `vim` เป็นโปรแกรมที่ใช้ในการแก้ไขข้อความที่ติดตั้งพร้อมมากับ Linux Server

`vim` คือ `vi` ที่ถูกพัฒนาขึ้นมาใหม่ โดยมีความสามารถที่มากกว่า `vi` และมีการใช้งานที่ง่ายขึ้น ใช้งานโดยใช้คำสั่ง `vim` ตามด้วยชื่อไฟล์ที่ต้องการแก้ไข

```bash
$ vim food.txt
```

โดย `vi` และ `vim` จะมีโหมดการทำงาน 2 โหมด คือ

1. **Command Mode** โหมดนี้ใช้ในรับคำสั่งหรือคีย์ลัด เมื่อกด `I` จะเป็นการเข้า Insert mode หากต้องการกลับมาให้กด `ESC`

2. **Insert Mode** โหมดนี้ใช้ในการแก้ไขข้อมูลในไฟล์เราสามารถเปิดไฟล์อื่นมาแก้หรือสร้างขึ้นมาโดยการพิมพฺ `:e` ตามด้วยชื่อไฟล์ที่ต้องการเปิด

```bash
:e file.txt
```

#### คำสั่งที่ใช้บ่อย

- `:w` บันทึกไฟล์
- `:q` ออกจากโปรแกรม
- `:wq` บันทึกและออกจากโปรแกรม
- `:q!` ออกจากโปรแกรมโดยไม่บันทึก
- `:e` เปิดไฟล์ใหม่
- `:e!` โหลดไฟล์ใหม่

#### คำสั่งใข้ Navigate
- `h` ขยับไปทางซ้าย
- `j` ขยับลง
- `k` ขยับขึ้น
- `l` ขยับไปทางขวา
- `0` ไปที่ต้นบรรทัด
- `$` ไปที่ท้ายบรรทัด
- `123` หรือ `123G` ขยับไปที่บรรทัดที่ 123
- `gg` ขยับไปที่บรรทัดแรก
- `G` ขยับไปที่บรรทัดสุดท้าย
- Ctrl + `f` เลื่อนหน้าลง
- Ctrl + `b` เลื่อนหน้าขึ้น
- Ctrl + `u` เลื่อนขึ้นครึ่งหน้า
- Ctrl + `d` เลื่อนลงครึ่งหน้า
- `w` ขยับไปหน้าคำถัดไป
- `b` ขยับไปหน้าคำก่อนหน้า
- `e` ขยับไปท้ายคำถัดไป
- `ge` ขยับไปท้ายคำก่อนหน้า
- `*` ขยับไปท้ายคำถัดไปที่เหมือนกับคำที่เรากำลังเลือก
- `#` ขยับไปท้ายคำก่อนหน้าที่เหมือนกับคำที่เรากำลังเลือก
- `(` ขยับไปหน้าประโยคถัดไป
- `)` ขยับไปหน้าประโยคก่อนหน้า
- `}` ขยับไปหน้าย่อหน้าถัดไป
- `{` ขยับไปหน้าย่อหน้าก่อนหน้า
- `Ctrl + o` ขยับไปหน้าหน้าที่เราเคยอยู่
- `Ctrl + i` ขยับไปหน้าหน้าที่เราเคยอยู่ก่อนหน้า
- `Ctrl + g` แสดงข้อมูลของไฟล์
- `Ctrl + r` ทำการ Undo
#### คำสั่งใข้ค้นหา
- `/` ค้นหาข้อความ เช่น `/txt` จะค้นหาข้อความ `txt` ในไฟล์
- `n` ขยับไปหน้าข้อความถัดไปที่เราค้นหา
- `N` ขยับไปหน้าข้อความก่อนหน้าที่เราค้นหา
- `:noh` ปิดการ Highlight ข้อความที่เราค้นหา จนกว่าเราจะค้นหาข้อความใหม่

#### คำสั่งใช้แก้ไขข้อความ
- `y` คัดลอกข้อความ
- `p` วางข้อความที่คัดลอกไว้
- `x` ลบข้อความ
- `dd` ลบบรรทัด
- `d$` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงท้ายบรรทัด
- `d0` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงต้นบรรทัด
- `d^` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงต้นบรรทัด
- `dgg` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงบรรทัดแรก
- `dG` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงบรรทัดสุดท้าย
- `d}` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงย่อหน้าถัดไป
- `d{` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงย่อหน้าก่อนหน้า
- `d*` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงคำถัดไปที่เหมือนกับคำที่เรากำลังเลือก
- `d#` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงคำก่อนหน้าที่เหมือนกับคำที่เรากำลังเลือก
- `d(` ลบข้อความจากตำแหน่งปัจจุบันไปจนถึงประโยคถัดไป
- `d)` ลบข้อความจากตำแหน่นไปจนถึงประโยคก่อนหน้า
- `daw` ลบคำที่เรากำลังเลือกพร้อมกับช่องว่างด้วย
- `diw` ลบคำที่เรากำลังเลือก

#### เลิกทำ/ทำซ้ำคำสั่ง
- `.` ทำซ้ำคำสั่งที่เราเคยทำ
- `u` ทำการ Undo
- `U` ทำการ Undo ในบรรทัดนั้น ๆ
- `Ctrl + r` ทำการ Redo

### Pager (less/more)
`less` และ `more` เป็นคำสั่งที่ใช้ในการอ่านและค้นหาข้อมูลในไฟล์ขนาดนิยมใช้กับไฟล์ขนาดใหญ่เพื่อที่จะช่วยให้หาข้อมูลได้ง่ายขึ้น ซึ่งจะทำให้เราสามารถเลื่อนขึ้นลงไปด้วย Arrow keys

```bash
$ less food.txt
```

หรือ

```bash
$ more food.txt
```

- ไม่สน case sensitive (พิมพ์เล็กพิมพ์ใหญ่) โดยการพิมพ์ less -I filename.txt
- ค้นหาคำโดย / เช่น /text โดยเมื่อหาเจอจะ highlight ข้อความไว้ถ้าไม่เจอจะขึ้นว่า Pattern not found
- กระไปบรรทัดที่ต้องการโดยการพิมพ์ g เช่น g55 คือ กระโดดไปบรรทัดที่ 55
- h เพื่อแสดง command บางส่วนที่จำเป็น q เพื่อออกจาก less

more จะคล้ายกับ less เพียงแต่ more จะเลื่อนหน้าลงได้อย่างเดียวเลื่อนขึ้นไม่ได้

### Head/Tail
`head` และ `tail` เป็นคำสั่งที่ใช้ในการแสดงข้อมูลบางส่วนของไฟล์ โดย `head` จะแสดงข้อมูลบรรทัดแรก ๆ ของไฟล์ และ `tail` จะแสดงข้อมูลบรรทัดสุดท้าย ๆ ของไฟล์

```bash
$ head food.txt
```

หรือ

```bash
$ tail food.txt
```

เราสามารถใช้คำสั่ง `head` และ `tail` พร้อมกับ `-n` เพื่อแสดงข้อมูลบรรทัดที่เราต้องการ เช่น 5 บรรทัด

```bash
$ head -n 5 food.txt
```

หรือ

```bash
$ tail -n 5 food.txt
```

### Grep/Pipe

`grep` เป็นคำสั่งที่ใช้ในการค้นหาข้อความในไฟล์ โดยเราสามารถใช้คำสั่ง `grep` พร้อมกับข้อความที่ต้องการค้นหา และชื่อไฟล์ที่ต้องการค้นหา

```bash
$ grep "text" food.txt
```

Pipe หรือ | ใช้ในการเชื่อม command เข้าด้วยกันทำให้การใช้งาน command มีประสิทธิภาพ ยิ่งขึ้นและมีความหลากหลายมากขึ้น

```bash
$ cat food.txt | grep "text"
```

หรือแสดงไฟล์ที่ใน directory เฉพาะที่มี .txt
```bash
$ ls -l | grep '.txt'
```

#### ตัวเลือกที่ใช้บ่อย
- `-i` ไม่สน case sensitive (พิมพ์เล็กพิมพ์ใหญ่)
- `-c` แสดงจำนวนข้อความที่ตรงกับเงื่อนไข
- `-l` แสดงชื่อไฟล์ที่เนื้อหาข้างในตรงกับเงื่อนไข
- `-w` แสดงประโยคและ highlight ข้อความที่มันตรงกันกับคำในเงื่อนไขเท่านั้น
- `-o` แสดงเฉพาะคำที่ข้อความตรงกันกับเงื่อนไข
- `-n` แสดงบรรทัดของข้อความและประโยคที่ในบรรทัดที่ตรงกับเงื่อนไข
- `-v` แสดงบรรทัดที่ข้อความไม่ตรงกับเงื่อนไข
- `^` แสดงข้อความที่คำในเงื่อนไขอยู่ตัวแรกสุดของบรรทัด
- `$` ใช้แสดงข้อความที่จบบรรทัดด้วยคำในเงื่อนไข

### Standard IO
คือการที่ระบบปฏิบัติการ linux สามารถช่วยให้เราเปลี่ยนช่องในการ input หรือ output โดยแบ่งได้เป็น 3 ส่วนคือ
- Standard Input (stdin) คือ input มาตรฐานในการรับคำสั่งโดยมักจะมาจาก keyboard แต่อาจมาจากไฟล์ก็ได้ สามารถใช้ < ในการเปลี่ยนช่อง input ได้ เช่น tr a-z A-Z > ex.txt เป็นการให้เรา input ด้วย keyboard ซึ่งข้อมูลจะอยู่ใน ex.txt
- Standard Output (stdout) คือ output มาตฐานในการแสดงผลของ command โดยมักจะแสดงผ่านทางหน้าจอ สามารถใช้ > ในการเปลี่ยนช่อง output ได้ เช่น ls > file.txt
- Standard Error (stderr) คือ การแสดงข้อมูลที่เกิดข้อผิดพลาดออกทางหน้าจอ ข้อผิดพลาดใดที่เกิดขึ้นจากโปรแกรม โดยมักจะแสดงออกทางหน้าจอ